\documentclass[fleqn]{beamer}

\mode<presentation>
 {
 \usetheme[compress]{Dresden}
 \definecolor{beamer@header}{HTML}{666666}
 \definecolor{beamer@blendedblue}{HTML}{015580}
 \definecolor{beamer@line}{HTML}{b5c55c}
 \definecolor{beamer@zed}{HTML}{0172ac}
 \setbeamercolor*{palette primary}{fg=white,bg=beamer@header}
 \setbeamercolor*{palette secondary}{fg=white,bg=beamer@line}

 \setbeamercolor{frametitle}{fg=beamer@blendedblue,bg=gray!10!white}
 \setbeamercolor{structure}{fg=beamer@header}
 \setbeamercolor{titlelike}{parent=palette primary,bg=white,fg=beamer@blendedblue}
\setbeamercolor{navigation symbols}{fg=red, bg=green}
 }


\usepackage{amsmath}
\usepackage[color]{circusPP}
\usepackage[british]{babel}
\usepackage{stmaryrd}
\usepackage{amscd}
\usepackage[capitalise,noabbrev]{cleveref}
\usepackage{tikz}
\usetikzlibrary{automata,positioning}
\usepackage{multirow}
\usepackage{makecell}
\usepackage{pdfcomment}
\newcommand{\pdfnote}[1]{\marginnote{\pdfcomment[hoffset=20em,icon=none]{#1}}}
%\setlength{\mathindent}{1.5em}
%\usepackage{amsthm}
\usepackage{graphicx}
\usepackage[labelformat=simple]{subcaption}
\renewcommand\thesubfigure{(\alph{subfigure})}
\captionsetup{compatibility=false}
%\usetheme[compress]{Dresden}
\setbeamertemplate{footline}[frame number]
%\setbeamertemplate{footline}{
%  \leavevmode%
%  \hbox{%
%  \begin{beamercolorbox}[wd=.333333\paperwidth,ht=2.25ex,dp=1ex,center]{author in head/foot}%
%    \usebeamerfont{author in head/foot}\insertshortauthor~~(\insertshortinstitute)
%  \end{beamercolorbox}%
%  \begin{beamercolorbox}[wd=.333333\paperwidth,ht=2.25ex,dp=1ex,center]{title in head/foot}%
%    \usebeamerfont{title in head/foot}\insertshorttitle
%  \end{beamercolorbox}%
%  \begin{beamercolorbox}[wd=.333333\paperwidth,ht=2.25ex,dp=1ex,right]{date in head/foot}%
%    \usebeamerfont{date in head/foot}\insertshortdate{}\hspace*{2em}
%    \insertframenumber{} \hspace*{2ex} % hier hat's sich geï¿½ndert
%  \end{beamercolorbox}}%
%  }
%  \vskip0pt%
%}
\setbeamertemplate{navigation symbols}{}
\setbeamertemplate{mini frames}{}
\renewcommand*{\slideentry}[6]{}
\newcommand{\beginbackup}{
   \newcounter{framenumbervorappendix}
   \setcounter{framenumbervorappendix}{\value{framenumber}}
}
\newcommand{\backupend}{
   \addtocounter{framenumbervorappendix}{-\value{framenumber}}
   \addtocounter{framenumber}{\value{framenumbervorappendix}} 
}


%\setbeamertemplate{headline}
%{%
%  \begin{beamercolorbox}[ht=3.5ex,dp=1.125ex,%
%      leftskip=.3cm,rightskip=.3cm plus1fil]{section in head/foot}
%    \usebeamerfont{section in head/foot}\usebeamercolor[fg]{section in head/foot}%
%  \insertsectionhead
% \end{beamercolorbox}%
%  \begin{beamercolorbox}[colsep=1.5pt]{middle separation line head}
%  \end{beamercolorbox}
%  \begin{beamercolorbox}[ht=2.5ex,dp=1.125ex,%
%    leftskip=.3cm,rightskip=.3cm plus1fil]{subsection in head/foot}
%    \usebeamerfont{subsection in head/foot}\insertsubsectionhead
%  \end{beamercolorbox}%
%  \begin{beamercolorbox}[colsep=1.5pt]{lower separation line head}
%  \end{beamercolorbox}
%}
%{}%remove navigation symbols
%\useoutertheme[subsection=false]{miniframes}

\usepackage{verbatim}
\usepackage[absolute,overlay]{textpos}
\usepackage{amsmath,listings}
% verbose-note
\usepackage[style=numeric-comp,sorting=none,sortcites=true,isbn=false,url=false,doi=false,block=space,defernumbers=true,citecounter=context,backend=bibtex]{biblatex}
%\usepackage[color]{circusPP}
%\usepackage{oz}
\definecolor{darkblue}{rgb}{0,0,0.5}
\definecolor{darkgreen}{rgb}{0,0.5,0}
\lstset{language=[LaTeX]TeX,
  basicstyle={\color{red}},
  morekeywords={%
    part,chapter,subsection,subsubsection,%
    paragraph,subparagraph,%
    appendix}}

\usecolortheme{rose}
\definecolor{unicolor}{RGB}{43,53,58}

\title[Modelling and Verification of Timed Robotic Controllers]{$tock$-CSP}

\author[pfr]{James Baxter and Pedro Ribeiro}
\date{\tiny Sheffield, 18th September 2018}

\institute[University of York]
{
  \vspace{1em}\\
  \includegraphics[scale=0.057]{UoY-Logo.eps}\\
  \vspace{0.6em}
  \inst{1}\textcolor{unicolor}{Department of Computer Science}\\
  \vspace{1em}
  \url{www.cs.york.ac.uk/circus/RoboCalc/}
  \vspace{1em}
}

\providecommand{\Circus}{\emph{Circus}}
\renewcommand{\footnotesize}{\tiny}
\renewcommand{\printbibheading}{}
\defbibheading{bibliography}{}

\setbeamertemplate{bibliography item}[text]
\setbeamerfont{bibliography entry author}{shape=\scshape,size=\tiny}
\setbeamerfont{bibliography entry title}{shape=\scshape,size=\tiny}
\setbeamerfont{bibliography entry journal}{shape=\scshape,size=\tiny}
\setbeamerfont{bibliography entry note}{shape=\scshape,size=\tiny}
\setbeamerfont{bibliography item}{shape=\scshape,size=\tiny}
\renewcommand{\bibfont}{\tiny}

\setbeamertemplate{footnote}{\insertfootnotetext}

\setlength{\abovecaptionskip}{-2ex} 
\setlength{\belowcaptionskip}{-2ex} 
\newcommand{\tab}{\hspace*{2em}}
%\bibliographystyle{apalike}  
\bibliography{reading,espfor,publications} 
%\setbeamertemplate{footline}[frame number]

%\newenvironment{slide}[1]%
%{\begin{refsegment}
%\begin{frame}[fragile,environment=slide]
%\frametitle{#1}
%}%
%{
%\footnotetext{\printbibliography[segment=1]}
%\end{frame}
%\end{refsegment}
%}
\usepackage{xifthen}% provides \isempty test
\newcommand{\footmake}[1]{
\ifthenelse{\equal{#1}{}}%
	{}%
	{\footnotetext{#1}}%
}

%\defbibenvironment{bibliography}
%{\begin{minipage}[b]{\linewidth}}
%{\end{minipage}}
%{}

\defbibenvironment{bibliography}
{
 \list{\printtext[labelnumberwidth]{%
    \printfield{prefixnumber}%
    \printfield{labelnumber}}}
{\setlength{\bibhang}{0pt}%
\setlength{\leftmargin}{\bibhang}%
\setlength{\itemindent}{-\leftmargin}%
\setlength{\itemsep}{\bibitemsep}%
\setlength{\parsep}{\bibparsep}}}
{\endlist}
{\item}

\newsavebox{\ptbib}

\newenvironment{slide}[1]
{\begin{frame}[fragile,environment=slide]
	\frametitle{#1}\begin{refsegment}}
{\footnotetext{\printbibliography[segment=\therefsegment]}\end{refsegment}\end{frame}}

\newenvironment{slide-nocite}[1]
{\begin{frame}[fragile,environment=slide-nocite]
\frametitle{#1}\begin{refsegment}}
{\end{refsegment}\end{frame}}% \footnotetext{\printbibliography[segment=\therefsegment]}

%\newtheorem{lemma}{Lemma}[section]
\newtheorem{define}{Definition}
\newcommand{\ptext}[1]{\tag*{\normalfont\{\text{#1}\}}} % Proof text %
\newcommand{\CircusTime}{{\sf\slshape Circus Time}}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Definitions taken from circusac.tex %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\def\IINew{\hbox{\texttt{\slshape I \kern -9.5pt I}}}
\newcommand{\dseq}{\ensuremath{\mathbin{\varodot}}}
\def\Limplies{\mathrel{\Leftarrow}}
\def\seqA{\mathrel{\Semi_{\mathcal{A}}}}
\def\seqD{\mathrel{\Semi_{\mathcal{D}}}}
\def\seqR{\mathrel{\Semi_{\mathcal{R}}}}
\def\seqRac{\mathrel{\Semi_{\mathcal{R}ac}}}

%% Auxiliary shortcuts %%

\def\refines{\mathrel{\sqsupseteq}}
\newcommand{\IIrea}{\IINew_{rea}}
\newcommand{\IIrel}{\IINew_{rel}}

%% Theory of reactive designs with angelic nondeterminism %%

\newcommand{\IIRac}{\IINew_{\mathcal{R}ac}}
\newcommand{\IIac}{\IINew_{ac}}
\newcommand*\circled[1]{\tikz[baseline=(char.base)]{
  \node[shape=circle,draw,inner sep=1pt] (char) {#1};}}
\newcommand\circledIn[2]{\circled{$\in$}^{#1}_{#2}}

%% UTP-DESIGNS %%

\newcommand{\IIA}{\IINew_{\mathcal{A}}}
\newcommand{\IID}{\IINew_{\mathcal{D}}}
\newcommand{\IIR}{\IINew_{\mathcal{R}}}
\newcommand{\botD}{\bot_{\mathcal{D}}}
\newcommand{\topD}{\top_{\mathcal{D}}}
\def\seqD{\mathrel{\mathbf{\circseq_{\mathcal{D}}}}}

%% UTP-DESIGNS with angelic nondeterminism %%

\newcommand{\IIDac}{\mathbf{\IINew_{\mathcal{D}ac}}}
\newcommand{\botDac}{\mathbf{\bot_{\mathcal{D}ac}}}
\newcommand{\topDac}{\mathbf{\top_{\mathcal{D}ac}}}
\def\seqDac{\mathrel{\mathbf{\Semi_{\mathcal{D}ac}}}}
\def\seqAC{\mathrel{\mathbf{\Semi_{\mathcal{AC}}}}}
\def\refinedbyDac{\mathrel{\sqsubseteq_{\mathcal{D}}}}
\def\assignDac{\mathrel{:=_{\mathcal{D}ac}}}
\def\sqcupDac{\mathrel{\mathbf{\sqcup_{\mathcal{D}ac}}}}
\def\sqcapDac{\mathrel{\mathbf{\sqcap_{\mathcal{D}ac}}}}

\def\vdashA{\mathrel{\mathbf{\vdash_{\mathcal{A}}}}}
\def\vdashDN{\mathrel{\mathbf{\vdash_{\mathcal{DN}}}}}
\def\vdashAC{\mathrel{\mathbf{\vdash_{\mathcal{AC}}}}}

%% Binary Multirelations (original theory) %%

\def\sqcupBM{\mathrel{\sqcup_{BM}}} 
\def\sqcapBM{\mathrel{\sqcap_{BM}}}
\def\seqBM{\mathrel{\circseq_{BM}}}
\def\topBM{\top_{BM}}
\def\botBM{\bot_{BM}}
\def\refinedbyBM{\mathrel{\sqsubseteq_{BM}}}

%% New Binary Multirelations with bot (new theory) %%

\def\sqcupBMbot{\mathrel{\sqcup_{{BM}_\bot}}} 
\def\sqcapBMbot{\mathrel{\sqcap_{{BM}_\bot}}}
\def\seqBMbot{\mathrel{\circseq_{{BM}_\bot}}}
\def\topBMbot{\top_{{BM}_\bot}}
\def\botBMbot{\bot_{{BM}_\bot}}
\def\refinedbyBMbot{\mathrel{\sqsubseteq_{{BM}_\bot}}}
\def\LrefinedbyBMbot{\mathrel{\sqsupseteq_{{BM}_\bot}}}

%% Beamer blocks %%

\newenvironment{counter-example}[0]{%
  \setbeamercolor{block body}{fg=black,bg=yellow!20!orange!10}
  \setbeamercolor{block title}{fg=orange!70!black,bg=yellow!30!orange!20}
  \begin{block}{Counter-example}}{\end{block}}

%\addtobeamertemplate{block begin}{
%\setlength\abovedisplayskip{0pt}
%\setlength\belowdisplayskip{0pt}
%\setlength\abovedisplayshortskip{0pt}
%\setlength\belowdisplayshortskip{0pt}
%\nointerlineskip}

\renewcommand\footnoterule{}
\urlstyle{sf}
\newcommand{\RC}[1]{{\sf #1}}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\setlength{\mathindent}{0pt}
\begin{document}

%\frame{\setbeamertemplate{footline}{} \titlepage}
{
\setbeamertemplate{footline}{} 
\begin{frame}
  \titlepage
\end{frame}
}
\addtocounter{framenumber}{-1}

\begin{frame}[fragile]
\frametitle{Outline}
\tableofcontents[hideallsubsections]
\end{frame}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% NEW STRUCTURE %
%
% 1. tock-CSP
%    - Model
%    - Healthiness Conditions
%    - Operators
%
% 2. tock-CSP and inputs/outputs
%    - Current results
%
% 3. tock-CSP and FL model
%    - Current results
%
% 4. Plans
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{$tock$-CSP}

\begin{slide-nocite}{Model}
  \begin{itemize}
  \item We extend our event set with tick and tock events: $\Sigma^{t\tick} = \Sigma \cup \{ tock, \tick \}$
  \item  $\begin{array}[t]{l}
            TockTrace == \{ \rho : \seq (\Sigma^{t\tick} \cup \power \Sigma^{t\tick}) | \\
            \t1 (\forall i : \dom \rho | i < \# \rho @ \rho~i \neq \tick) \land \\
            \t1 (\forall i : \dom \rho | i < \# \rho \land \rho~i \in \power \Sigma^{t\tick} @ \rho~(i+1) = tock) \\
            \}
          \end{array}$
  \item So $\tick$ may only occur last, and any refusal not at the end must be followed by $tock$.
  \end{itemize}
\end{slide-nocite}

\begin{slide-nocite}{Healthiness Conditions (1)}
  \begin{itemize}
    \item $TockProcess == \power TockTrace$\\
    \item Prefix relation where $X, Y : \power \Sigma^{t\tick}$ and $e : \Sigma^{t\tick}$.\\
      $\begin{aligned}
          \lseq\rseq                   &\le  \sigma
        \\\lseq X \rseq \cat \rho      &\le  \lseq Y \rseq \cat \sigma &\iff&~ X \subseteq Y \land \rho \le \sigma
        \\\lseq tock \rseq \cat \rho   &\le  \lseq Y \rseq \cat \sigma &\iff&~ \rho \le \sigma
        \\\lseq e \rseq \cat \rho      &\le  \lseq e \rseq \cat \sigma &\iff&~ \rho \le \sigma
      \end{aligned}$
  \end{itemize}
  \begin{itemize}
    \item Non-empty:\\
    $CT0(P) \circdef P \neq \emptyset$
    \item Prefix closure:\\
    $CT1(P) \circdef \forall \rho, \sigma : TockTrace @ (\rho \le \sigma \land \sigma \in P) \implies \rho \in P$
  \end{itemize}
\end{slide-nocite}

\begin{slide-nocite}{Healthiness Conditions (2)}
  \begin{itemize}
    \item Refusals of impossible events:\\
    $\begin{array}{l}
      CT2(P) \circdef \\
        \forall \rho, \sigma : TockTrace; X, Y: \Sigma^{t\tick} @ \\
        \left(\begin{array}{l}
          \rho \cat \lseq X \rseq \in P \land Y \cap \{e : \Sigma^{t\tick} | \rho \cat \lseq e \rseq \in P\} = \emptyset
          \\ \implies \\
          \rho \cat \lseq X \cup Y \rseq \in P
        \end{array}\right)
      \end{array}$
  \end{itemize}
\end{slide-nocite}

\begin{slide-nocite}{Operators}
  We have definitions for: divergence, deadlock, termination, delays,
  event prefixing, internal choice, external choice, and sequential
  composition.

  \vfill

  Since several operators allow $tock$ events to occur before the
  operator, we define a set of sequences of $tock$ events, possibly
  with refusals that are subsets of a set $X$ before them.
  This set also includes the empty sequence.
  \begin{displaymath}
    tocks(X) == \{\langle\rangle\} \cup {} \\
    \t1 \{ \rho : TockTrace | \\
    \t2 \# \rho > 0 \land \rho~(\# \rho) = tock \land \\
    \t2 (\forall i : \dom \rho @ \rho~i \in \{tock\} \cup \power X) \}
  \end{displaymath}
\end{slide-nocite}

\begin{slide-nocite}{Operators: Divergence}
  The empty trace is the only trace we can observe for divergence:
  \begin{displaymath}
    div == \{\langle\rangle\}    
  \end{displaymath}
\end{slide-nocite}

\begin{slide-nocite}{Operators: Deadlock}
  For a deadlock, $tock$ is the only event that is accepted, and
  everything else is refused. 
  We can thus observe a trace of $tock$ events and refusals, ending in
  a tock, possibly followed by a refusal. 
  None of the refusals may contain $tock$.
  \begin{displaymath}
    STOP == \\
    \t1 \{ \rho : tocks(\Sigma^{t\tick} \setminus \{tock\}); X : \power (\Sigma^{t\tick} \setminus \{tock\}) @ \\
    \t2 \rho, \rho \cat \langle X \rangle \}
  \end{displaymath}
\end{slide-nocite}

\begin{slide-nocite}{Operators: Termination}
  Termination happens immediately, so we refuse everything but $\tick$.
  \begin{displaymath}
    SKIP == \{X : \power \Sigma^{t\tick} | \tick \notin X @ \langle\rangle, \langle X \rangle, \langle \tick \rangle \}
  \end{displaymath}
\end{slide-nocite}

\begin{slide-nocite}{Operators: Delay}
  Delay consists of refusing everything but $tock$, until a given
  number of $tock$ events have passed, after which $\tick$ is offered
  and no further $tock$ events may occur.
  \begin{displaymath}
    wait(n) == \\
    \t1 \{ \rho : tocks(\Sigma^{t\tick} \setminus \{tock\}); X : \power (\Sigma^{t\tick} \setminus \{tock\}) | \\
    \t2 \# (\rho \filter \{tock\}) < n @ \rho, \rho \cat \langle X \rangle \}  \\
    \t1 {} \cup \{ \rho : tocks(\Sigma^{t\tick} \setminus \{tock\}); X : \power (\Sigma^{t\tick} \setminus \{tick\}) | \\
    \t2 \# (\rho \filter \{tock\}) = n @ \rho, \rho \cat \langle X \rangle, \rho \cat \langle \tick \rangle \} \\
  \end{displaymath}
\end{slide-nocite}

\begin{slide-nocite}{Operators: Event Prefixing}
  Event prefixing offers both $tock$ and the given event. 
  When the given event is performed (possibly after a sequence of
  $tock$ events), the prefixing behaves like the given process.
  \begin{displaymath}
    e \then P == \\
    \t1 \{ \rho : tocks(\Sigma^{t\tick}); X : \power (\Sigma^{t\tick} \setminus \{tock, e\}) @ \rho, \rho \cat \langle X \rangle\} \\
    \t2 {} \cup \{ \rho : tocks(\Sigma^{t\tick}); \sigma : P @ \rho \cat \langle e \rangle \sigma \}
  \end{displaymath}
\end{slide-nocite}

\begin{slide-nocite}{Operators: Internal Choice}
  Internal choice may give the observations of either of its operands,
  so the are unioned together.
  \begin{displaymath}
    P \intchoice Q == P \cup Q
  \end{displaymath}
\end{slide-nocite}

\begin{slide-nocite}{Operators: External Choice (without handling termination)}
  The occurrence of $tock$ events does not resolve an external choice,
  so we take all the traces from each operand whose longest prefix of
  $tock$ events is the same as for a sequence from the other operand,
  to ensure synchronisation on $tock$.
  If the rest of the trace after the $tock$ events is a refusal, then
  we require that the trace is in both operands, since we offer the
  events of both.
  \begin{displaymath}
    P \extchoice Q == \\
    \t1 \{ \rho : tocks(\Sigma^{t\tick}); \sigma, \tau : TockTrace | \\
    \t2 \rho \cat \sigma \in P \land \rho \cat \tau \in Q \land \\
    \t2 (\forall \rho' : tocks(\Sigma^{t\tick}) | \rho' \leq \rho \cat \sigma @ \rho' \leq \rho) \land \\
    \t2 (\forall \rho' : tocks(\Sigma^{t\tick}) | \rho' \leq \rho \cat \tau @ \rho' \leq \rho)\\
    \t2 ((\exists X : \power \Sigma^{t\tick} @ \sigma = \langle X \rangle) \implies \rho \cat \sigma \in P \cap Q) \land \\
    \t2 ((\exists X : \power \Sigma^{t\tick} @ \tau = \langle X \rangle) \implies \rho \cat \tau \in P \cap Q) @ \\
    \t1 \rho \cat \sigma, \rho \cat \tau \}  
  \end{displaymath}
\end{slide-nocite}

\begin{slide-nocite}{Operators: External Choice (with termination)}
  Since $\tick$ takes priority over all other events, any external
  choice that (possibly after some number of $tock$ events) can
  perform $\tick$ and has at least one refusal (i.e.\ it doesn't
  diverge), can refuse everything but $\tick$.
  \begin{displaymath}
    P \extchoice^\tick Q == (P \extchoice Q) \cup {} \\
    \t1 \{ \rho : tocks(\Sigma^{t\tick}); X : \power (\Sigma^{t\tick} \setminus \{\tick\}) | \\
    \t2 \rho \cat \langle \tick \rangle \in P \extchoice Q \land (\exists Y : \power \Sigma^{t\tick} @ \rho \cat \langle Y \rangle \in P \extchoice Q) @ \\
    \t3 \rho \cat \langle X \rangle \}  
  \end{displaymath}
\end{slide-nocite}

\begin{slide-nocite}{Operators: Sequential Composition}
  The sequential composition of $P$ and $Q$ consists of all the
  non-terminating traces in $P$ and all the terminating traces in $P$
  followed by traces of $Q$.
  \begin{displaymath}
    P \circseq Q == \{ \rho : P | \rho = \langle\rangle \lor last~rho \neq \tick\} \\
    \t1 {} \cup \{ \rho : P; \sigma : Q | \rho \neq \langle\rangle \lor last~rho = \tick @ (front~\rho) \cat \sigma \}
  \end{displaymath}
\end{slide-nocite}

\begin{slide-nocite}{FDR refinement encoding (1)}
Following Mestel and Roscoe's approach we can check refinement of $tock$-CSP processes
in FDR using the following construction.
\begin{enumerate}
  \item For each CSP event $e$ define an event $ref(e)$ (of type $\Sigma^{t}_{ref}$), that encodes the refusal of $e$.
        %In FDR this can be achieved, for example, by using a channel of name $ref$ and type
        %$\Sigma^{t\tick}$.
  \item Define a priority order $\leq$, where $ref(e) < e$ for all $e : \Sigma^{t}$.
  \item Define a context $C1(P)$ for a process $P$, where $ref(e)$ is only possible
        when $e$ is not being offered:\\
        $C1(P) \circdef \mathbf{Pri}(P ||| RUN(\lchan ref\rchan))_{\leq}$
  \item Define a context $C2(P)$ where following a $ref(e)$ event other $ref(x)$ events are
        allowed, and only after a $tock$ can $P$ perform events other than $ref(x)$.
\end{enumerate}
\end{slide-nocite}

\begin{slide-nocite}{FDR refinement encoding (2)}
Context $C2$ is defined as follows.
\begin{itemize}
  \item $C2(P) \circdef C1(P) \lpar \Sigma^{t} \cup \Sigma^{t}_{ref} \rpar Control$
  \item The process $Control$ ensures that refusals appear sequentially.
   \begin{align*}
      Control \circdef \left(\begin{array}{l}
        \Extchoice e : \Sigma^{t} @ e \then Control
        \\ \extchoice \\
        \Extchoice r : \Sigma^{t}_{ref} @ r \then Refusals
      \end{array}\right)
    \end{align*}
  \item The process $Refusals$ ensures that no events other than $tock$ can follow
    a refusal.
    \begin{align*}
      Refusals \circdef (\Extchoice r : \Sigma^{t}_{ref} @ r \then Refusals) \extchoice tock \then Control
    \end{align*}
\end{itemize}
\end{slide-nocite}

%\begin{slide-nocite}{Relationship with FL-model}
%
%\end{slide-nocite}

\end{document}
